<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-16">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ViaCep | API</title>
</head>
<body>
    <form action="" method="get">
        <label for="cep"> CEP </label>
        <input type="text" id="textInput__cep">
        <button type="submit" id="btn__cep"> Inspecionar CEP </button>
    </form>
    <table>
        <thead>
            <tr>
                CEP RETORNADO
            </tr>
        </thead>
        <tbody id="table"></tbody>
    </table>
    <script type="text/javascript">

        // CONSTANCIANDO OS OBJETOS INERENTES AO ID DE ESTRITO ELEMENTO NO FORMULÃRIO
        const getFormInputCep = document.querySelector("#textInput__cep");
        const getFormBtnCep = document.querySelector("#btn__cep");
        const getTableForm = document.querySelector('#table');

        new xhr = XMLHttpRequest();

        let varCepItemComp = {
            cep: getFormInputCep.querySelector.value,
            logradouro: getFormInputCep.querySelector.value,
            complemento: getFormInputCep.querySelector.value,
            bairro: getFormInputCep.querySelector.value,
            localidade: getFormInputCep.querySelector.value,
            uf: getFormInputCep.querySelector.value,
            unidade: getFormInputCep.querySelector.value,
            ibge: getFormInputCep.querySelector.value,
            gia: getFormInputCep.querySelector.value
        };
        
        function preencherTabela(varCepItemComp) {
        varCepItemComp.forEach((element) => {
            const tr = document.createElement('tr');
            const td_cep = document.createElement('td');
            const td_logradouro = document.createElement('td');
            const td_complemento = document.createElement('td');
            const td_bairro = document.createElement('td');
            const td_localidade = document.createElement('td');
            const td_uf = document.createElement('td');
            const td_unidade = document.createElement('td');
            const td_ibge = document.createElement('td');
            const td_gia = document.createElement('td');

            td_cep.textContent = element.cep;
            td_logradouro.textContent = element.logradouro;
            td_complemento.textContent = element.complemento;
            td_bairro.textContent = element.bairro;
            td_localidade.textContent = element.localidade;
            td_uf.textContent = element.uf;
            td_unidade.textContent = element.unidade;
            td_ibge.textContent = element.ibge;
            td_gia.textContent = element.gia;
            
            tabela.appendChild(tr);
            tr.appendChild(td_cep);
            tr.appendChild(td_logradouro);
            tr.appendChild(td_complemento);
            tr.appendChild(td_bairro);
            tr.appendChild(td_localidade);
            tr.appendChild(td_uf);
            tr.appendChild(td_unidade);
            tr.appendChild(td_ibge);
            tr.appendChild(td_gia);
            });
        }

        getFormBtnCep.addEventListener('click', Element, Function =>{
            event.preventDefault();
            var varCEP = varCepItemComp.filter(Element =>{
                xhr.open('GET', "https://viacep.com.br/ws/"+Element.cep+"/json", true);
                xhr.setRequestHeader('Content-Type','application/json; charset=utf-8');
                xhr.send(varCepItemComp);
            if(Element.cep === varCepItemComp.cep){
                console.log()   
                }
            });
            preencherTabela(varCepItemComp)
        }



    </script>
</body>
</html>